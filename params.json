{"name":"qogdata","tagline":"Quality of Government data, at your fingertips, in R.","body":"The __qogdata__ package is a collection of functions to manipulate [Quality of Government](http://www.qog.pol.gu.se/) datasets and codebooks in R. It provides a few additional services to map QOG variables and to merge QOG datasets with other country-level data sources.\r\n\r\nVersion 0.1 of the `qogdata` package is installable with the `devtools` package:\r\n\r\n    library(devtools)\r\n    devtools::install_github(\"qogdata\", \"briatte\", dependencies = TRUE)\r\n\r\nPlease post comments, issues and suggestions in the [Issues](https://github.com/briatte/qogdata/issues) section. The package might be submitted to CRAN if I manage to add as many functionalities as I would like to.\r\n\r\nThe rest of this document describes currently available functions.\r\n\r\n## `qogdata`\r\n\r\n`qogdata` simply points to a [QOG server](http://www.qogdata.pol.gu.se/) to download available versions of the QOG datasets. By default, it simply returns the path to the QOG Standard cross-section dataset:\r\n\r\n    > qogdata()\r\n    [1] \"http://www.qogdata.pol.gu.se/data/QoG_std_cs_15May13.csv\"\r\n\r\nSet `file` to `TRUE` or to a specific filename to download the dataset:\r\n\r\n    > QOG = qogdata(file = TRUE, format = \"ts\", codebook = TRUE)\r\n    Downloading http://www.qogdata.pol.gu.se/data/QoG_std_ts_15May13.csv...\r\n    Loaded qog_std_ts_15May13.csv (N = 14137, 1946-2012, T = 67).\r\n\r\nSet `codebook` to `TRUE` or to a specific filename to also download the codebook with the `qogbook` function:\r\n\r\n    > QOG = qogdata(file = TRUE, format = \"ts\", codebook = TRUE)\r\n    Downloading http://www.qogdata.pol.gu.se/data/QoG_std_ts_15May13.csv...\r\n    Loaded qog_std_ts_15May13.csv (N = 14137, 1946-2012, T = 67).\r\n    Downloading codebook to Codebook_QoG_Std15May13.pdf...\r\n    Codebook: Codebook_QoG_Std15May13.pdf\r\n\r\nThe examples use `tempfile()` to save temporary copies of a QOG dataset before plotting:\r\n\r\n    qplot(data = qogdata(tempfile(), version = \"bas\"), \r\n          x = bl_asyt25, y = wdi_fr, size = mad_pop / 10^3) + \r\n      scale_size_area(\"Population (mill.)\", max_size = 12) +\r\n      labs(y = \"Fertility rate\", x = \"Average years of schooling, pop. aged 25+\") +\r\n      theme_grey(16)\r\n\r\n![](https://raw.github.com/briatte/qogdata/master/example1.png)\r\n\r\nThe QOG Standard dataset is [currently](http://www.qogdata.pol.gu.se/data/) available in CSV, SPSS and Stata formats, and other versions of the dataset are available only in Stata format. `qogdata` will call `foreign` to import the Stata format and `Hmisc` to import the SPSS format. The [codebooks](http://www.qogdata.pol.gu.se/codebook/) are in PDF format and are downloaded by the `qogbook` function.\r\n\r\n## `qogfind`\r\n\r\n`qogfind` uses the two indexes bundled with the package to make finding variables a bit quicker for the end-user:\r\n\r\n    > qogfind(\"public|administration\")\r\n    QOG Standard results:\r\n         variable                            label ts.min ts.max ts.N ts.T cs.N cs.min cs.max\r\n    217   gir_acs Administration and Civil Service   2004   2011  251    8   91   2006   2011\r\n    291 irai_epru    Equity of Public Resource Use   2005   2011  532    7   80   2006   2011\r\n    301  irai_qpa Quality of Public Administration   2005   2011  532    7   80   2006   2011\r\n    304  irai_tac Transparency, Accountability and   2005   2011  532    7   80   2006   2011\r\n    460  wdi_puhe Public Health Expenditure (% of    1995   2010 2960   16  187   2009   2009\r\n    710  wvs_f115 Justifiable: avoiding a fare on    1981   2008  157   28   NA     NA     NA\r\n    716   wvs_pet           Public self-expression   1981   2008  161   28   NA     NA     NA\r\n\r\nThe function searches through variable names and labels, as the `lookfor` command would in Stata. The `ts` columns provides years of measurement for the time-series dataset, the `cs` columns for the cross-sectional dataset. The information matches the figures reported in the _QOG Standard Codebook_ and _QOG Social Policy Codebook_. It can be easily plotted:\r\n\r\n    qplot(data = qogfind(\"ihme_|undp_\"), \r\n          y = label, yend = label, x = ts.min, xend = ts.max, \r\n          geom = \"segment\", size = I(6), alpha = ts.T) +\r\n        scale_alpha(\"Year range\") +\r\n        theme_minimal(16) +\r\n        labs(y = NULL, x = NULL, title = \"Data availability\") + \r\n        theme(legend.position = \"bottom\")\r\n\r\n![](https://raw.github.com/briatte/qogdata/master/example2.png)\r\n\r\n## `qogmap`\r\n\r\n`qogmap` calls the `countrycode`, `maps` and `ggplot2` packages to draw choropleth maps of QOG cross-sectional data:\r\n\r\n    QOG = qogdata(tempfile(), warn.missing.labels = FALSE, convert.factors = TRUE,\r\n                  version = \"bas\", variables = c(\"ccodealp\", \"undp_hdi\", \"ihme_nm\"))\r\n    qogmap(subset(QOG, ccodealp != \"RUS\"), \"ihme_nm\", continent = \"Asia\") +\r\n      ggtitle(\"Neonatal Mortality Rate per 1,000 births (IHME, 2009))\")\r\n\r\n![](https://raw.github.com/briatte/qogdata/master/example3.png)\r\n\r\nThe function works with `ggplot2` to detect the scale of the map (continuous or discrete). The `quantize` option can also create quantiles of a variable on the fly:\r\n\r\n    qogmap(QOG, \"undp_hdi\", quantize = 3, continents = c(\"Africa\", \"Asia\")) +\r\n      scale_fill_brewer(\"\", palette = \"RdYlBu\", labels = c(\"Low\", \"Med\", \"High\")) +\r\n      ggtitle(\"Human Development Index (UNDP, 2009-2010)\")\r\n\r\n![](https://raw.github.com/briatte/qogdata/master/example4.png)\r\n\r\nThe function matches QOG countries to geographic information from the `world` map provided in the `maps` package. It also adds continents and regions with the `countrycode` package to allow plots of specific areas. The map projection currently suffers from a little bug as soon as you include Russia.\r\n\r\n# CREDITS\r\n\r\n`qogdata` takes inspiration from two [QOG packages for Stata users](http://www.qog.pol.gu.se/data/dataextras/forstatausers/), [`qog`](http://ideas.repec.org/c/boc/bocode/s457283.html) by Christoph Thewes and [`qogbook`](http://ideas.repec.org/c/boc/bocode/s457599.html) by Richard Svensson. Further credits due to the authors of the QOG datasets (see the package documentation for references).","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}